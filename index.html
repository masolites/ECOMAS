 <!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>MASOLITES ECOMAS</title>
    <!-- Open Graph Meta Tags for Social Sharing -->
    <meta property="og:title" content="MASOLITES ECOMAS - A Better Society Together">
    <meta property="og:description" content="Economic Community Of Masolites. A Trusted Products & Services Hub using MAZOL Token">
    <meta property="og:image" content="https://masolites.github.io/ECOMAS/social-banner.jpg">
    <meta property="og:url" content="https://masolites.github.io/ECOMAS">
    <meta name="twitter:card" content="summary_large_image">
    
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.ethers.io/lib/ethers-5.7.umd.min.js" type="application/javascript"></script>
    <script src="https://checkout.flutterwave.com/v3.js"></script>
    <style>
        :root {
            --deep-blue: #0a2463;
            --navy: #1a1a2e;
            --light-blue: #3e92cc;
            --lemon-green: #a4de02;
            --accent: #d8315b;
            --card-bg: rgba(26, 26, 46, 0.95);
            --text-light: #ffffff;
            --mining-off: #ff9500;
            --mining-on: #4cd964;
            --bronze: #cd7f32;
            --silver: #c0c0c0;
            --gold: #ffd700;
            --platinum: #e5e4e2;
            --social-bg: rgba(0, 0, 0, 0.85);
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }
        
        body {
            background: linear-gradient(rgba(15, 12, 41, 0.85), rgba(48, 43, 99, 0.85)), 
                        url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 800 400"><rect fill="%231a1a2e" width="800" height="400"/><text fill="rgba(255,255,255,0.8)" font-family="Arial" font-size="40" x="400" y="200" text-anchor="middle">MASOLITES ECOMAS</text><text fill="rgba(164,222,2,0.8)" font-family="Arial" font-size="24" x="400" y="240" text-anchor="middle">A Better Society Together</text></svg>');
            background-size: cover;
            color: var(--text-light);
            font-family: 'Inter', sans-serif;
            min-height: 100vh;
            padding: 10px;
            overflow: hidden;
            position: relative;
        }
        
        .app-container {
            max-width: 100%;
            height: calc(100vh - 20px);
            display: flex;
            flex-direction: column;
            margin: 0 auto;
            overflow: hidden;
        }
        
        /* Social Media Overlay */
        .social-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: var(--social-bg);
            z-index: 10000;
            display: flex;
            flex-direction: column;
            backdrop-filter: blur(10px);
        }
        
        .social-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px;
            background: rgba(0, 0, 0, 0.7);
            border-bottom: 1px solid var(--light-blue);
        }
        
        .social-logo {
            font-size: 1.5rem;
            font-weight: 800;
            background: linear-gradient(to right, var(--lemon-green), var(--light-blue));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .social-close {
            background: transparent;
            border: none;
            color: var(--text-light);
            font-size: 1.5rem;
            cursor: pointer;
        }
        
        .social-content {
            flex: 1;
            display: flex;
            overflow: hidden;
        }
        
        .social-sidebar {
            width: 300px;
            background: rgba(0, 0, 0, 0.5);
            padding: 15px;
            overflow-y: auto;
            border-right: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .social-main {
            flex: 1;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }
        
        .social-video-container {
            flex: 1;
            display: flex;
            justify-content: center;
            align-items: center;
            background: #000;
            position: relative;
        }
        
        .social-video {
            width: 100%;
            height: 100%;
            max-width: 800px;
            background: rgba(0, 0, 0, 0.7);
            display: flex;
            justify-content: center;
            align-items: center;
        }
        
        .social-video-placeholder {
            text-align: center;
            padding: 20px;
        }
        
        .social-video-placeholder i {
            font-size: 5rem;
            margin-bottom: 20px;
            color: var(--light-blue);
        }
        
        .social-actions {
            display: flex;
            justify-content: center;
            gap: 20px;
            padding: 15px;
            background: rgba(0, 0, 0, 0.5);
            border-top: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .social-action-btn {
            display: flex;
            flex-direction: column;
            align-items: center;
            color: white;
            background: none;
            border: none;
            cursor: pointer;
        }
        
        .social-action-btn i {
            font-size: 1.5rem;
            margin-bottom: 5px;
        }
        
        .social-feed {
            padding: 15px;
            overflow-y: auto;
        }
        
        .social-post {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 15px;
            margin-bottom: 15px;
            border: 1px solid var(--light-blue);
        }
        
        .post-header {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
        }
        
        .post-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: var(--light-blue);
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 10px;
        }
        
        .post-user {
            font-weight: 600;
        }
        
        .post-time {
            font-size: 0.7rem;
            opacity: 0.7;
        }
        
        .post-content {
            margin-bottom: 10px;
        }
        
        .post-actions {
            display: flex;
            gap: 15px;
        }
        
        .post-action {
            display: flex;
            align-items: center;
            gap: 5px;
            cursor: pointer;
        }
        
        /* Header Styles */
        .top-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 0;
            margin-bottom: 10px;
        }
        
        .logo {
            font-size: 1.5rem;
            font-weight: 800;
            background: linear-gradient(to right, var(--lemon-green), var(--light-blue));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .auth-container {
            display: flex;
            gap: 8px;
        }
        
        .btn {
            padding: 8px 12px;
            border-radius: 50px;
            font-size: 0.8rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            border: none;
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        .btn-login {
            background: rgba(255, 255, 255, 0.1);
            color: var(--text-light);
            border: 1px solid var(--light-blue);
        }
        
        .btn-register {
            background: var(--lemon-green);
            color: var(--navy);
        }
        
        .admin-btn {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.1);
            color: var(--text-light);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.9rem;
            cursor: pointer;
            border: 1px solid var(--light-blue);
        }
        
        .logout-btn {
            background: var(--accent);
            color: white;
            padding: 8px 12px;
            border-radius: 50px;
            font-size: 0.8rem;
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        .member-badge {
            background: rgba(164, 222, 2, 0.2);
            border: 1px solid var(--lemon-green);
            border-radius: 50px;
            padding: 6px 10px;
            font-size: 0.7rem;
            display: inline-block;
            margin-top: 5px;
        }
        
        /* Main Content Area */
        .main-content {
            flex: 1;
            overflow-y: auto;
            padding-bottom: 10px;
        }
        
        .card {
            background: var(--card-bg);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 15px;
            margin-bottom: 10px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
        }
        
        .card.compact {
            padding: 12px;
        }
        
        .card-title {
            font-size: 1rem;
            margin-bottom: 10px;
            color: var(--lemon-green);
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .welcome-message {
            font-size: 0.75rem;
            line-height: 1.5;
            text-align: center;
            opacity: 0.9;
        }
        
        .sale-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 8px;
        }
        
        .price-info {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-bottom: 10px;
            flex-wrap: wrap;
        }
        
        .price {
            font-size: 0.7rem;
            font-weight: 700;
            background: rgba(0, 0, 0, 0.3);
            padding: 6px 10px;
            border-radius: 50px;
            border: 1px solid var(--accent);
        }
        
        .countdown-timer {
            display: flex;
            justify-content: center;
            gap: 8px;
            margin: 10px 0;
        }
        
        .countdown-item {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 10px;
            padding: 8px;
            min-width: 55px;
            text-align: center;
            border: 1px solid var(--accent);
        }
        
        .countdown-value {
            font-size: 1.1rem;
            font-weight: 700;
            font-family: 'Courier New', monospace;
            background: linear-gradient(to bottom, #fff, #ccc);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        
        .countdown-label {
            font-size: 0.6rem;
            text-transform: uppercase;
            margin-top: 3px;
            color: var(--text-light);
            opacity: 0.8;
        }
        
        .mining-counter {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 15px;
            padding: 12px;
            text-align: center;
            border: 1px solid var(--accent);
            margin: 10px 0;
        }
        
        .mining-display {
            display: flex;
            justify-content: space-between;
            font-size: 0.9rem;
            font-weight: 700;
            font-family: 'Courier New', monospace;
        }
        
        .mining-label {
            font-size: 0.65rem;
            font-weight: 600;
            color: var(--text-light);
            margin-bottom: 3px;
            opacity: 0.8;
        }
        
        .mining-actions {
            display: flex;
            flex-direction: column;
            gap: 8px;
            margin-top: 12px;
        }
        
        .cta-button {
            padding: 12px;
            border-radius: 50px;
            width: 100%;
            font-weight: 600;
            border: none;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            font-size: 0.9rem;
        }
        
        .buy-button {
            background: var(--accent);
            color: white;
        }
        
        .mining-button {
            background: var(--mining-off);
            color: #000;
        }
        
        .mining-button.mining-active {
            background: var(--mining-on);
        }
        
        .claim-button {
            background: var(--light-blue);
            color: var(--navy);
            display: none;
        }
        
        .action-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 8px;
            margin-top: 8px;
        }
        
        .action-card {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 12px 5px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            border: 1px solid var(--light-blue);
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .action-card:hover {
            transform: translateY(-3px);
            background: rgba(255, 255, 255, 0.2);
        }
        
        .action-icon {
            font-size: 1.4rem;
            margin-bottom: 3px;
            color: var(--text-light);
        }
        
        .action-label {
            font-size: 0.6rem;
            font-weight: 700;
            text-align: center;
            text-transform: uppercase;
            color: var(--text-light);
        }
        
        /* Badge Styles */
        .badge-container {
            display: flex;
            justify-content: center;
            gap: 5px;
            margin: 10px 0;
            flex-wrap: wrap;
        }
        
        .badge {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
            position: relative;
            box-shadow: 0 0 10px rgba(0,0,0,0.3);
        }
        
        .badge-free {
            background: var(--light-blue);
            color: var(--navy);
        }
        
        .badge-bronze {
            background: var(--bronze);
            color: white;
        }
        
        .badge-silver {
            background: var(--silver);
            color: var(--navy);
        }
        
        .badge-gold {
            background: var(--gold);
            color: var(--navy);
        }
        
        .badge-platinum {
            background: var(--platinum);
            color: var(--navy);
        }
        
        /* Modal Styles */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            z-index: 1000;
            justify-content: center;
            align-items: center;
            padding: 10px;
            overflow-y: auto;
        }
        
        .modal-content {
            background: var(--navy);
            border-radius: 20px;
            width: 100%;
            max-width: 100%;
            max-height: 90vh;
            overflow: hidden;
            box-shadow: 0 20px 50px rgba(0, 0, 0, 0.5);
            border: 1px solid var(--light-blue);
        }
        
        .modal-header {
            padding: 15px;
            background: rgba(0, 0, 0, 0.3);
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .modal-header h3 {
            color: var(--lemon-green);
            font-size: 1.1rem;
        }
        
        .modal-close {
            background: transparent;
            border: none;
            color: var(--text-light);
            font-size: 1.5rem;
            cursor: pointer;
        }
        
        .modal-body {
            padding: 15px;
            max-height: calc(90vh - 60px);
            overflow-y: auto;
        }
        
        /* Tabs */
        .tabs {
            display: flex;
            gap: 5px;
            margin-bottom: 15px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 50px;
            padding: 5px;
        }
        
        .tab-btn {
            flex: 1;
            padding: 10px;
            background: transparent;
            border: none;
            color: var(--text-light);
            cursor: pointer;
            border-radius: 50px;
            font-weight: 600;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 5px;
            font-size: 0.8rem;
        }
        
        .tab-btn.active {
            background: var(--light-blue);
            color: var(--navy);
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
        }
        
        /* Form Elements */
        .form-group {
            margin-bottom: 12px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: 600;
            font-size: 0.8rem;
        }
        
        .form-group input, 
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: 12px;
            border-radius: 12px;
            border: 1px solid var(--light-blue);
            background: rgba(255, 255, 255, 0.1);
            color: white;
            font-size: 0.9rem;
        }
        
        .form-row {
            display: flex;
            gap: 8px;
        }
        
        .form-row .form-group {
            flex: 1;
        }
        
        /* Vote Form */
        .vote-form {
            padding: 15px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 15px;
            margin-top: 15px;
        }
        
        .vote-price {
            text-align: center;
            margin: 10px 0;
            font-size: 1.2rem;
            font-weight: 700;
            color: var(--lemon-green);
        }
        
        /* Mining Status */
        .mining-status {
            text-align: center;
            margin-top: 5px;
            font-size: 0.7rem;
            color: rgba(255, 255, 255, 0.7);
        }
        
        /* AI Price Suggestion */
        .ai-suggestion {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 10px;
            padding: 10px;
            margin: 10px 0;
            font-size: 0.8rem;
        }
        
        .ai-title {
            color: var(--lemon-green);
            margin-bottom: 5px;
            font-weight: 600;
        }
        
        /* Connect Wallet Button */
        .connect-wallet-btn {
            background: var(--lemon-green);
            color: var(--navy);
            padding: 10px 15px;
            border-radius: 50px;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 8px;
            margin: 10px auto;
            border: none;
            cursor: pointer;
        }
        
        /* Product List */
        .product-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 10px;
            margin-top: 15px;
        }
        
        .product-card {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 15px;
            padding: 10px;
            border: 1px solid var(--light-blue);
            cursor: pointer;
        }
        
        .product-image {
            width: 100%;
            height: 100px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 8px;
        }
        
        .product-title {
            font-size: 0.8rem;
            font-weight: 600;
            margin-bottom: 5px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        
        .product-price {
            color: var(--lemon-green);
            font-size: 0.9rem;
            font-weight: 700;
        }
        
        .discount-badge {
            background: var(--accent);
            color: white;
            padding: 2px 5px;
            border-radius: 4px;
            font-size: 0.7rem;
            margin-top: 3px;
            display: inline-block;
        }
        
        /* Responsive Adjustments */
        @media (max-width: 480px) {
            .countdown-item {
                min-width: 50px;
                padding: 6px;
            }
            
            .countdown-value {
                font-size: 1rem;
            }
            
            .action-icon {
                font-size: 1.2rem;
            }
            
            .btn {
                padding: 6px 10px;
                font-size: 0.7rem;
            }
        }
        
        /* Hide scrollbar for Chrome, Safari and Opera */
        .main-content::-webkit-scrollbar {
            display: none;
        }
        
        /* Hide scrollbar for IE, Edge and Firefox */
        .main-content {
            -ms-overflow-style: none;  /* IE and Edge */
            scrollbar-width: none;  /* Firefox */
        }
    </style>
</head>
<body>
    <!-- Social Media Overlay -->
    <div class="social-overlay" id="socialOverlay">
        <div class="social-header">
            <h1 class="social-logo">
                <i class="fas fa-comments"></i>
                TruYan Social
            </h1>
            <button class="social-close" id="socialCloseBtn">
                <i class="fas fa-times"></i>
            </button>
        </div>
        <div class="social-content">
            <div class="social-sidebar">
                <h3>Platform Features</h3>
                <ul>
                    <li><i class="fas fa-gift"></i> Earn MZL tokens for engagement</li>
                    <li><i class="fas fa-video"></i> Watch videos to earn rewards</li>
                    <li><i class="fas fa-users"></i> Join live sessions for bonuses</li>
                    <li><i class="fas fa-store"></i> Promote products and earn</li>
                    <li><i class="fas fa-comment-dots"></i> Connect with other members</li>
                    <li><i class="fas fa-share-alt"></i> Share content for token rewards</li>
                </ul>
                
                <h3>Current Activities</h3>
                <div class="social-post">
                    <div class="post-header">
                        <div class="post-avatar">
                            <i class="fas fa-user"></i>
                        </div>
                        <div>
                            <div class="post-user">Masolites Team</div>
                            <div class="post-time">Just now</div>
                        </div>
                    </div>
                    <div class="post-content">
                        Join our live session tomorrow at 2PM to learn about crypto mining and earn 5 MZL tokens!
                    </div>
                    <div class="post-actions">
                        <div class="post-action">
                            <i class="fas fa-heart"></i> 24
                        </div>
                        <div class="post-action">
                            <i class="fas fa-comment"></i> 8
                        </div>
                        <div class="post-action">
                            <i class="fas fa-share"></i> 3
                        </div>
                    </div>
                </div>
            </div>
            <div class="social-main">
                <div class="social-video-container">
                    <div class="social-video">
                        <div class="social-video-placeholder">
                            <i class="fas fa-play-circle"></i>
                            <h3>Welcome to TruYan Social</h3>
                            <p>Connect with the community and earn rewards</p>
                            <button class="cta-button" id="socialLoginBtn" style="margin-top: 20px;">
                                <i class="fas fa-sign-in-alt"></i> Login to Social Platform
                            </button>
                        </div>
                    </div>
                </div>
                <div class="social-actions">
                    <button class="social-action-btn">
                        <i class="fas fa-home"></i>
                        <span>Home</span>
                    </button>
                    <button class="social-action-btn">
                        <i class="fas fa-search"></i>
                        <span>Discover</span>
                    </button>
                    <button class="social-action-btn">
                        <i class="fas fa-plus-circle"></i>
                        <span>Create</span>
                    </button>
                    <button class="social-action-btn">
                        <i class="fas fa-envelope"></i>
                        <span>Messages</span>
                    </button>
                    <button class="social-action-btn">
                        <i class="fas fa-user"></i>
                        <span>Profile</span>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <div class="app-container">
        <div class="top-header">
            <h1 class="logo">
                <i class="fas fa-coins"></i>
                MASOLITES ECOMAS
            </h1>
            <div class="auth-container">
                <button class="btn btn-login" id="loginBtn">
                    <i class="fas fa-sign-in-alt"></i> Login
                </button>
                <button class="btn btn-register" id="registerBtn">
                    <i class="fas fa-user-plus"></i> Register
                </button>
                <div class="admin-btn" id="adminBtn" title="Admin Panel">
                    <i class="fas fa-cog"></i>
                </div>
                <button class="logout-btn" id="logoutBtn" style="display:none;">
                    <i class="fas fa-sign-out-alt"></i> Logout
                </button>
            </div>
        </div>
        
        <div class="main-content">
            <div class="card">
                <p class="welcome-message">ECOMAS is Economic Community Of Masolites. A Trusted Products & Services Hub using MAZOL Token. MAZOL Daily New Price is decided by your vote. Enjoy Free Mining, Discounts & Sell Stuff too.</p>
            </div>
            
            <div class="card compact private-sale-card">
                <div class="sale-header">
                    <h3 class="card-title"><i class="fas fa-coins"></i> PRIVATE SALE ENDS IN</h3>
                    <button class="cta-button buy-button" id="buyButton">
                        <i class="fas fa-shopping-cart"></i> BUY MAZOL
                    </button>
                </div>
                <div class="price-info">
                    <span class="price">$0.001/MZLx</span>
                    <span class="price">₦18/MZLx</span>
                </div>
                <div class="countdown-timer">
                    <div class="countdown-item">
                        <div class="countdown-value" id="days">120</div>
                        <div class="countdown-label">Days</div>
                    </div>
                    <div class="countdown-item">
                        <div class="countdown-value" id="hours">00</div>
                        <div class="countdown-label">Hours</div>
                    </div>
                    <div class="countdown-item">
                        <div class="countdown-value" id="minutes">00</div>
                        <div class="countdown-label">Minutes</div>
                    </div>
                </div>
            </div>
            
            <div class="card compact">
                <h3 class="card-title"><i class="fas fa-hard-hat"></i> MAZOL MINING PORTAL</h3>
                <div class="mining-counter">
                    <div class="mining-display">
                        <div class="mining-speed">
                            <div class="mining-label">Speed</div>
                            <div id="minedAmount">0.000000 MZLx/s</div>
                        </div>
                        <div class="mining-total">
                            <div class="mining-label">Total</div>
                            <div id="miningTotal">0.000000 MZLx</div>
                        </div>
                    </div>
                </div>
                <div class="mining-actions">
                    <button class="cta-button mining-button" id="miningButton">
                        <i class="fas fa-play"></i> START MINING (OFF)
                    </button>
                    <button class="cta-button claim-button" id="claimButton" style="display:none;">
                        <i class="fas fa-wallet"></i> CLAIM MZLx
                    </button>
                </div>
                <div class="mining-status" id="miningStatus">
                    Mining will automatically stop after 24 hours
                </div>
            </div>
            
            <div class="badge-container" id="badgeContainer">
                <!-- Badges will be populated here -->
            </div>
            
            <div class="card action-buttons-card">
                <div class="action-grid">
                    <div class="action-card" id="saveEarnBtn">
                        <div class="action-icon"><i class="fas fa-piggy-bank"></i></div>
                        <div class="action-label">Save & Earn</div>
                    </div>
                    <div class="action-card" id="escrowShopBtn">
                        <div class="action-icon"><i class="fas fa-store"></i></div>
                        <div class="action-label">Escrow Shop</div>
                    </div>
                    <div class="action-card" id="platformWalletBtn">
                        <div class="action-icon"><i class="fas fa-wallet"></i></div>
                        <div class="action-label">My Wallet</div>
                    </div>
                    <div class="action-card" id="voteBtn">
                        <div class="action-icon"><i class="fas fa-vote-yea"></i></div>
                        <div class="action-label">Vote</div>
                    </div>
                </div>
            </div>
            
            <div class="card">
                <h3 class="card-title"><i class="fas fa-chart-line"></i> TODAY'S PRICE VOTE</h3>
                <div class="vote-price">
                    Current Price: $<span id="currentPrice">0.001</span>
                </div>
                <div class="ai-suggestion">
                    <div class="ai-title"><i class="fas fa-robot"></i> AI Price Suggestion</div>
                    <div>Based on market trends, today's suggested price is $0.0012 to reach $0.1 by Day 120.</div>
                </div>
                <div class="vote-form">
                    <div class="form-group">
                        <label>New Token Price ($)</label>
                        <input type="number" id="newPrice" min="0.001" step="0.001" value="0.001">
                    </div>
                    <button class="cta-button" id="submitVote">
                        <i class="fas fa-vote-yea"></i> Submit Vote
                    </button>
                    <p class="note" style="font-size:0.7rem; margin-top:8px;">Voting: 6pm - 11:30pm WAT | Results at 11:45pm</p>
                </div>
            </div>
            
            <button class="connect-wallet-btn" id="connectWalletBtn">
                <i class="fas fa-plug"></i> Connect Metamask Wallet
            </button>
        </div>
    </div>

    <!-- Auth Modals -->
    <div class="modal" id="registerModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3><i class="fas fa-user-plus"></i> Create Account</h3>
                <button class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label>Email</label>
                    <input type="email" id="registerEmail" placeholder="your@email.com" required>
                </div>
                <div class="form-group">
                    <label>Password</label>
                    <input type="password" id="registerPassword" placeholder="Create password" required>
                </div>
                <div class="form-group">
                    <label>Referral Code (optional)</label>
                    <input type="text" id="referralCode" placeholder="Enter referral code">
                </div>
                <button class="cta-button" id="confirmRegister">
                    <i class="fas fa-check"></i> Register
                </button>
                <p class="auth-note" style="font-size:0.7rem; margin-top:10px;">By registering, you agree to our Terms of Service</p>
            </div>
        </div>
    </div>

    <div class="modal" id="loginModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3><i class="fas fa-sign-in-alt"></i> Login to Account</h3>
                <button class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label>Email</label>
                    <input type="email" id="loginEmail" placeholder="your@email.com" required>
                </div>
                <div class="form-group">
                    <label>Password</label>
                    <input type="password" id="loginPassword" placeholder="Your password" required>
                </div>
                <button class="cta-button" id="confirmLogin">
                    <i class="fas fa-check"></i> Login
                </button>
                <p class="auth-note" style="font-size:0.7rem; margin-top:10px; text-align:center;">New user? <a href="#" id="showRegister">Register instead</a></p>
            </div>
        </div>
    </div>

    <!-- Save & Earn Modal -->
    <div class="modal" id="saveEarnModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3><i class="fas fa-piggy-bank"></i> Save & Earn</h3>
                <button class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <div class="tabs">
                    <button class="tab-btn active" data-tab="manual">
                        <i class="fas fa-building"></i> Bank
                    </button>
                    <button class="tab-btn" data-tab="flutterwave">
                        <i class="fas fa-credit-card"></i> Flutterwave
                    </button>
                    <button class="tab-btn" data-tab="crypto">
                        <i class="fas fa-coins"></i> Crypto
                    </button>
                </div>
                
                <div class="tab-content active" id="manualTab">
                    <div class="card" style="background: rgba(0,0,0,0.3); margin-bottom:15px;">
                        <h4><i class="fas fa-university"></i> Pay To Bank:</h4>
                        <p><strong>UBA</strong>: 1026664654</p>
                        <p><strong>Account Name</strong>: Masses Freedom</p>
                    </div>
                    
                    <div class="form-group">
                        <label>Amount (₦)</label>
                        <input type="number" id="depositAmount" min="500" max="2000000" value="1000">
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label>Date (dd.mm.yy)</label>
                            <input type="text" id="receiptDate" placeholder="01.01.23">
                        </div>
                        <div class="form-group">
                            <label>Time (hh.mm am/pm)</label>
                            <input type="text" id="receiptTime" placeholder="12.00 pm">
                        </div>
                    </div>
                    
                    <button class="cta-button" id="submitDeposit">
                        <i class="fas fa-paper-plane"></i> Submit Deposit
                    </button>
                    <p class="note" style="font-size:0.7rem; margin-top:10px;">Min: ₦500, Max: ₦2,000,000</p>
                </div>
                
                <div class="tab-content" id="flutterwaveTab">
                    <div class="form-group">
                        <label>Amount (₦)</label>
                        <input type="number" id="fwAmount" min="500" value="1000">
                    </div>
                    
                    <button class="cta-button" id="processFlutterwave">
                        <i class="fas fa-credit-card"></i> Pay with Flutterwave
                    </button>
                </div>
                
                <div class="tab-content" id="cryptoTab">
                    <div class="form-group">
                        <label>Amount (USDT)</label>
                        <input type="number" id="cryptoAmount" min="10" value="50">
                    </div>
                    
                    <button class="cta-button" id="processCrypto">
                        <i class="fas fa-coins"></i> Vest Crypto
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Dashboard Modal -->
    <div class="modal" id="dashboardModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3><i class="fas fa-user-circle"></i> Your Dashboard</h3>
                <button class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <div class="card" style="background: rgba(0,0,0,0.3); margin-bottom:15px;">
                    <h4><i class="fas fa-wallet"></i> Crypto Wallet</h4>
                    <p><strong>Address:</strong></p>
                    <div style="word-break: break-all; font-family: monospace; font-size:0.8rem; background:rgba(0,0,0,0.5); padding:8px; border-radius:8px; margin-top:5px;" id="cryptoAddress">0x000...0000</div>
                    <p style="margin-top:8px;"><strong>Balance:</strong> <span id="cryptoBalance">0</span> MZLx</p>
                </div>
                
                <div class="card" style="background: rgba(0,0,0,0.3); margin-bottom:15px;">
                    <h4><i class="fas fa-money-bill-wave"></i> Fiat Wallet</h4>
                    <p><strong>Account:</strong> <span id="fiatAccount">MAS_0000000000</span></p>
                    <p><strong>Balance:</strong> ₦<span id="fiatBalance">0</span></p>
                </div>
                
                <div class="card" style="background: rgba(0,0,0,0.3); margin-bottom:15px;">
                    <h4><i class="fas fa-exchange-alt"></i> P2P Transfer</h4>
                    <div class="form-group">
                        <label>Recipient Wallet Address</label>
                        <input type="text" id="recipientAddress" placeholder="Enter recipient address">
                    </div>
                    <div class="form-group">
                        <label>Amount (MZLx)</label>
                        <input type="number" id="transferAmount" min="1" value="10">
                    </div>
                    <button class="cta-button" id="transferButton">
                        <i class="fas fa-paper-plane"></i> Send MZLx
                    </button>
                    <p class="note" style="font-size:0.7rem; margin-top:10px;">Platform fee: 0.4% per transaction</p>
                </div>
                
                <div class="card" style="background: rgba(0,0,0,0.3); margin-bottom:15px;">
                    <h4><i class="fas fa-bell"></i> Notifications</h4>
                    <div id="notificationList" style="max-height:150px; overflow-y:auto;">
                        <div style="padding:10px; border-bottom:1px solid rgba(255,255,255,0.1);">
                            <p>Welcome to Masolites! Start by exploring the platform.</p>
                            <p style="font-size:0.7rem; color:rgba(255,255,255,0.6); margin-top:3px;">Just now</p>
                        </div>
                    </div>
                </div>
                
                <div class="card" style="background: rgba(0,0,0,0.3);">
                    <h4><i class="fas fa-user-edit"></i> Update Profile</h4>
                    <div class="form-group">
                        <input type="text" id="userFullName" placeholder="Full Name">
                    </div>
                    <div class="form-group">
                        <input type="tel" id="userPhone" placeholder="Phone Number">
                    </div>
                    <button class="cta-button" id="updateProfile">
                        <i class="fas fa-save"></i> Update Profile
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Buy Options Modal -->
    <div class="modal" id="buyModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3><i class="fas fa-shopping-cart"></i> Buy MAZOL Tokens</h3>
                <button class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label>Select Membership Level</label>
                    <select id="membershipLevel">
                        <option value="bronze">Bronze (25 MZLx minimum)</option>
                        <option value="silver">Silver (1000 MZLx minimum)</option>
                        <option value="gold">Gold (2000 MZLx minimum)</option>
                        <option value="platinum">Platinum (Paid Registration)</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label>Amount (MZLx)</label>
                    <input type="number" id="buyAmount" min="25" value="25">
                </div>
                
                <div class="tabs" style="margin-top:15px;">
                    <button class="tab-btn active" data-tab="bankOption">
                        <i class="fas fa-building"></i> Bank
                    </button>
                    <button class="tab-btn" data-tab="usdtOption">
                        <i class="fab fa-ethereum"></i> USDT
                    </button>
                    <button class="tab-btn" data-tab="flutterOption">
                        <i class="fas fa-bolt"></i> Flutterwave
                    </button>
                </div>
                
                <div class="tab-content active" id="bankOptionTab">
                    <div class="card" style="background: rgba(0,0,0,0.3); margin-top:15px;">
                        <h4><i class="fas fa-university"></i> Bank Transfer</h4>
                        <p>₦18 per MZLx</p>
                        <p style="margin-top:10px;"><strong>UBA</strong>: 1026664654</p>
                        <p><strong>Account Name</strong>: Masses Freedom</p>
                    </div>
                </div>
                
                <div class="tab-content" id="usdtOptionTab">
                    <div class="card" style="background: rgba(0,0,0,0.3); margin-top:15px;">
                        <h4><i class="fab fa-ethereum"></i> USDT Payment</h4>
                        <p>$0.001 per MZLx</p>
                        <p style="margin-top:10px; word-break:break-all;"><strong>USDT Address</strong>: 0x9a3E0603d8e91dA3f1c5F3B2C3D4E5F6A7B8C9D0</p>
                    </div>
                </div>
                
                <div class="tab-content" id="flutterOptionTab">
                    <div class="card" style="background: rgba(0,0,0,0.3); margin-top:15px;">
                        <h4><i class="fas fa-bolt"></i> Flutterwave Payment</h4>
                        <p>Instant Payment</p>
                    </div>
                </div>
                
                <button class="cta-button" id="confirmBuy" style="margin-top:15px;">
                    <i class="fas fa-check"></i> Confirm Purchase
                </button>
            </div>
        </div>
    </div>

    <!-- Admin Access Modal -->
    <div class="modal" id="adminAccessModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3><i class="fas fa-lock"></i> Admin Access</h3>
                <button class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label>Admin Username</label>
                    <input type="text" id="adminUsername" placeholder="Enter admin username" required>
                </div>
                <div class="form-group">
                    <label>Password</label>
                    <input type="password" id="adminPassword" placeholder="Enter password" required>
                </div>
                <div class="form-group">
                    <label>6-Digit PIN</label>
                    <input type="text" id="adminPin" placeholder="Enter 6-digit PIN" maxlength="6" required>
                </div>
                <div class="error-message" id="adminError" style="display:none;"></div>
                <button class="cta-button" id="adminLoginBtn">
                    <i class="fas fa-sign-in-alt"></i> Access Admin Panel
                </button>
            </div>
        </div>
    </div>

    <!-- Escrow Shop Modal -->
    <div class="modal" id="escrowShopModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3><i class="fas fa-store"></i> Escrow Shop</h3>
                <button class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <div class="tabs">
                    <button class="tab-btn active" data-tab="buy">
                        <i class="fas fa-shopping-cart"></i> Buy
                    </button>
                    <button class="tab-btn" data-tab="sell">
                        <i class="fas fa-tag"></i> Sell
                    </button>
                </div>
                
                <div class="tab-content active" id="buyTab">
                    <div class="search-bar" style="display:flex; gap:8px; margin-bottom:15px;">
                        <input type="text" id="productSearch" placeholder="Search products...">
                        <button class="cta-button" style="padding:10px 15px;" id="searchProductsBtn">
                            <i class="fas fa-search"></i>
                        </button>
                    </div>
                    
                    <div class="product-grid" id="productGrid">
                        <!-- Products will be populated here -->
                    </div>
                </div>
                
                <div class="tab-content" id="sellTab">
                    <div class="form-group">
                        <label>Product/Service Name</label>
                        <input type="text" id="productName" placeholder="Enter product/service name" required>
                    </div>
                    <div class="form-group">
                        <label>Description</label>
                        <textarea id="productDescription" placeholder="Describe your product/service" rows="3" required></textarea>
                    </div>
                    <div class="form-group">
                        <label>Price (MZLx)</label>
                        <input type="number" id="productPrice" min="1" value="10" required>
                    </div>
                    <div class="form-group">
                        <label>Category</label>
                        <select id="productCategory">
                            <option value="electronics">Electronics</option>
                            <option value="fashion">Fashion</option>
                            <option value="services">Services</option>
                            <option value="real-estate">Real Estate</option>
                            <option value="others">Others</option>
                        </select>
                    </div>
                    <button class="cta-button" id="listProductBtn">
                        <i class="fas fa-plus"></i> List Product/Service
                    </button>
                    <p class="note" style="font-size:0.7rem; margin-top:10px;">
                        <i class="fas fa-info-circle"></i> Free members can list up to 3 products. Premium members have higher limits.
                    </p>
                </div>
            </div>
        </div>
    </div>

    <!-- Product Detail Modal -->
    <div class="modal" id="productDetailModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="productDetailTitle"></h3>
                <button class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <div class="product-image" style="margin-bottom:15px; height:200px;">
                    <i class="fas fa-image" style="font-size:3rem; opacity:0.3;"></i>
                </div>
                
                <div class="form-group">
                    <label>Description</label>
                    <p id="productDetailDescription" style="margin-top:5px;"></p>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label>Price</label>
                        <p id="productDetailPrice" style="color:var(--lemon-green); font-weight:700; font-size:1.2rem;"></p>
                    </div>
                    <div class="form-group">
                        <label>Seller</label>
                        <p id="productDetailSeller"></p>
                    </div>
                </div>
                
                <div class="form-group">
                    <label>Category</label>
                    <p id="productDetailCategory"></p>
                </div>
                
                <button class="cta-button" id="buyProductBtn">
                    <i class="fas fa-shopping-cart"></i> Buy Now
                </button>
            </div>
        </div>
    </div>

    <script>
        // Tokenomics Configuration
        const TOKENOMICS = {
            totalSupply: 50000000,
            privateSale: 25000000,
            currentPrice: 0.001,
            ngnPrice: 18,
            miningBaseRate: 0.0000001, // Base mining rate per second
            badgeMultipliers: {
                free: 1,
                bronze: 1.5,
                silver: 2,
                gold: 3,
                platinum: 4
            },
            platformFee: 0.004, // 0.4% platform fee
            maxFreeProducts: 3,
            discounts: {
                free: 0,
                bronze: 0.05,
                silver: 0.10,
                gold: 0.15,
                platinum: 0.20
            },
            halvingInterval: 365 * 4, // Halving every 4 years (in days)
            initialHalvingDate: new Date('2023-01-01'),
            mlmLevels: 5, // 5 levels deep
            mlmPercentage: 0.025 // 2.5% per level
        };

        // FLUTTERWAVE LIVE PUBLIC KEY - REPLACE WITH YOUR ACTUAL KEY
        const FLW_PUBLIC_KEY = "FLWPUBK-XXXXXXXXXXXXXXXXXXXXXXXXXX-X";
        
        // MAZOL Token Contract Details
        const CONTRACT_ADDRESS = "0x49F4a728BD98480E92dBfc6a82d595DA9d1F7b83";
        const CONTRACT_ABI = [{"inputs":[],"stateMutability":"nonpayable","type":"constructor"},{"inputs":[{"internalType":"address","name":"recipient","type":"address"},{"internalType":"uint256","name":"value","type":"uint256"}],"name":"CurrencyTransferLibFailedNativeTransfer","type":"error"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"owner","type":"address"},{"indexed":true,"internalType":"address","name":"spender","type":"address"},{"indexed":false,"internalType":"uint256","name":"value","type":"uint256"}],"name":"Approval","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"delegator","type":"address"},{"indexed":true,"internalType":"address","name":"fromDelegate","type":"address"},{"indexed":true,"internalType":"address","name":"toDelegate","type":"address"}],"name":"DelegateChanged","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"delegate","type":"address"},{"indexed":false,"internalType":"uint256","name":"previousBalance","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"newBalance","type":"uint256"}],"name":"DelegateVotesChanged","type":"event"},{"anonymous":false,"inputs":[],"name":"EIP712DomainChanged","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"platformFeeRecipient","type":"address"},{"indexed":false,"internalType":"uint256","name":"flatFee","type":"uint256"}],"name":"FlatPlatformFeeUpdated","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint8","name":"version","type":"uint8"}],"name":"Initialized","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"platformFeeRecipient","type":"address"},{"indexed":false,"internalType":"uint256","name":"platformFeeBps","type":"uint256"}],"name":"PlatformFeeInfoUpdated","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"enum IPlatformFee.PlatformFeeType","name":"feeType","type":"uint8"}],"name":"PlatformFeeTypeUpdated","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"recipient","type":"address"}],"name":"PrimarySaleRecipientUpdated","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"bytes32","name":"role","type":"bytes32"},{"indexed":true,"internalType":"bytes32","name":"previousAdminRole","type":"bytes32"},{"indexed":true,"internalType":"bytes32","name":"newAdminRole","type":"bytes32"}],"name":"RoleAdminChanged","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"bytes32","name":"role","type":"bytes32"},{"indexed":true,"internalType":"address","name":"account","type":"address"},{"indexed":true,"internalType":"address","name":"sender","type":"address"}],"name":"RoleGranted","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"bytes32","name":"role","type":"bytes32"},{"indexed":true,"internalType":"address","name":"account","type":"address"},{"indexed":true,"internalType":"address","name":"sender","type":"address"}],"name":"RoleRevoked","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"mintedTo","type":"address"},{"indexed":false,"internalType":"uint256","name":"quantityMinted","type":"uint256"}],"name":"TokensMinted","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"signer","type":"address"},{"indexed":true,"internalType":"address","name":"mintedTo","type":"address"},{"components":[{"internalType":"address","name":"to","type":"address"},{"internalType":"address","name":"primarySaleRecipient","type":"address"},{"internalType":"uint256","name":"quantity","type":"uint256"},{"internalType":"uint256","name":"price","type":"uint256"},{"internalType":"address","name":"currency","type":"address"},{"internalType":"uint128","name":"validityStartTimestamp","type":"uint128"},{"internalType":"uint128","name":"validityEndTimestamp","type":"uint128"},{"internalType":"bytes32","name":"uid","type":"bytes32"}],"indexed":false,"internalType":"struct ITokenERC20.MintRequest","name":"mintRequest","type":"tuple"}],"name":"TokensMintedWithSignature","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"from","type":"address"},{"indexed":true,"internalType":"address","name":"to","type":"address"},{"indexed":false,"internalType":"uint256","name":"value","type":"uint256"}],"name":"Transfer","type":"event"},{"inputs":[],"name":"CLOCK_MODE","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"DEFAULT_ADMIN_ROLE","outputs":[{"internalType":"bytes32","name":"","type":"bytes32"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"DEFAULT_FEE_RECIPIENT","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"DOMAIN_SEPARATOR","outputs":[{"internalType":"bytes32","name":"","type":"bytes32"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"owner","type":"address"},{"internalType":"address","name":"spender","type":"address"}],"name":"allowance","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"spender","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"approve","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"account","type":"address"}],"name":"balanceOf","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"burn","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"account","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"burnFrom","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"account","type":"address"},{"internalType":"uint32","name":"pos","type":"uint32"}],"name":"checkpoints","outputs":[{"components":[{"internalType":"uint32","name":"fromBlock","type":"uint32"},{"internalType":"uint224","name":"votes","type":"uint224"}],"internalType":"struct ERC20VotesUpgradeable.Checkpoint","name":"","type":"tuple"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"clock","outputs":[{"internalType":"uint48","name":"","type":"uint48"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"contractType","outputs":[{"internalType":"bytes32","name":"","type":"bytes32"}],"stateMutability":"pure","type":"function"},{"inputs":[],"name":"contractURI","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"contractVersion","outputs":[{"internalType":"uint8","name":"","type":"uint8"}],"stateMutability":"pure","type":"function"},{"inputs":[],"name":"decimals","outputs":[{"internalType":"uint8","name":"","type":"uint8"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"spender","type":"address"},{"internalType":"uint256","name":"subtractedValue","type":"uint256"}],"name":"decreaseAllowance","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"delegatee","type":"address"}],"name":"delegate","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"delegatee","type":"address"},{"internalType":"uint256","name":"nonce","type":"uint256"},{"internalType":"uint256","name":"expiry","type":"uint256"},{"internalType":"uint8","name":"v","type":"uint8"},{"internalType":"bytes32","name":"r","type":"bytes32"},{"internalType":"bytes32","name":"s","type":"bytes32"}],"name":"delegateBySig","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"account","type":"address"}],"name":"delegates","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"eip712Domain","outputs":[{"internalType":"bytes1","name":"fields","type":"bytes1"},{"internalType":"string","name":"name","type":"string"},{"internalType":"string","name":"version","type":"string"},{"internalType":"uint256","name":"chainId","type":"uint256"},{"internalType":"address","name":"verifyingContract","type":"address"},{"internalType":"bytes32","name":"salt","type":"bytes32"},{"internalType":"uint256[]","name":"extensions","type":"uint256[]"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"timepoint","type":"uint256"}],"name":"getPastTotalSupply","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"account","type":"address"},{"internalType":"uint256","name":"timepoint","type":"uint256"}],"name":"getPastVotes","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getPlatformFeeInfo","outputs":[{"internalType":"address","name":"","type":"address"},{"internalType":"uint16","name":"","type":"uint16"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"bytes32","name":"role","type":"bytes32"}],"name":"getRoleAdmin","outputs":[{"internalType":"bytes32","name":"","type":"bytes32"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"bytes32","name":"role","type":"bytes32"},{"internalType":"uint256","name":"index","type":"uint256"}],"name":"getRoleMember","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"bytes32","name":"role","type":"bytes32"}],"name":"getRoleMemberCount","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"account","type":"address"}],"name":"getVotes","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"bytes32","name":"role","type":"bytes32"},{"internalType":"address","name":"account","type":"address"}],"name":"grantRole","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"bytes32","name":"role","type":"bytes32"},{"internalType":"address","name":"account","type":"address"}],"name":"hasRole","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"spender","type":"address"},{"internalType":"uint256","name":"addedValue","type":"uint256"}],"name":"increaseAllowance","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_defaultAdmin","type":"address"},{"internalType":"string","name":"_name","type":"string"},{"internalType":"string","name":"_symbol","type":"string"},{"internalType":"string","name":"_contractURI","type":"string"},{"internalType":"address[]","name":"_trustedForwarders","type":"address[]"},{"internalType":"address","name":"_primarySaleRecipient","type":"address"},{"internalType":"address","name":"_platformFeeRecipient","type":"address"},{"internalType":"uint256","name":"_platformFeeBps","type":"uint256"}],"name":"initialize","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"forwarder","type":"address"}],"name":"isTrustedForwarder","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"mintTo","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"components":[{"internalType":"address","name":"to","type":"address"},{"internalType":"address","name":"primarySaleRecipient","type":"address"},{"internalType":"uint256","name":"quantity","type":"uint256"},{"internalType":"uint256","name":"price","type":"uint256"},{"internalType":"address","name":"currency","type":"address"},{"internalType":"uint128","name":"validityStartTimestamp","type":"uint128"},{"internalType":"uint128","name":"validityEndTimestamp","type":"uint128"},{"internalType":"bytes32","name":"uid","type":"bytes32"}],"internalType":"struct ITokenERC20.MintRequest","name":"_req","type":"tuple"},{"internalType":"bytes","name":"_signature","type":"bytes"}],"name":"mintWithSignature","outputs":[],"stateMutability":"payable","type":"function"},{"inputs":[{"internalType":"bytes[]","name":"data","type":"bytes[]"}],"name":"multicall","outputs":[{"internalType":"bytes[]","name":"results","type":"bytes[]"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"name","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"owner","type":"address"}],"name":"nonces","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"account","type":"address"}],"name":"numCheckpoints","outputs":[{"internalType":"uint32","name":"","type":"uint32"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"owner","type":"address"},{"internalType":"address","name":"spender","type":"address"},{"internalType":"uint256","name":"value","type":"uint256"},{"internalType":"uint256","name":"deadline","type":"uint256"},{"internalType":"uint8","name":"v","type":"uint8"},{"internalType":"bytes32","name":"r","type":"bytes32"},{"internalType":"bytes32","name":"s","type":"bytes32"}],"name":"permit","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"primarySaleRecipient","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"bytes32","name":"role","type":"bytes32"},{"internalType":"address","name":"account","type":"address"}],"name":"renounceRole","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"bytes32","name":"role","type":"bytes32"},{"internalType":"address","name":"account","type":"address"}],"name":"revokeRole","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"string","name":"_uri","type":"string"}],"name":"setContractURI","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_platformFeeRecipient","type":"address"},{"internalType":"uint256","name":"_platformFeeBps","type":"uint256"}],"name":"setPlatformFeeInfo","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_saleRecipient","type":"address"}],"name":"setPrimarySaleRecipient","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"bytes4","name":"interfaceId","type":"bytes4"}],"name":"supportsInterface","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"symbol","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"totalSupply","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"transfer","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"from","type":"address"},{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"transferFrom","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"components":[{"internalType":"address","name":"to","type":"address"},{"internalType":"address","name":"primarySaleRecipient","type":"address"},{"internalType":"uint256","name":"quantity","type":"uint256"},{"internalType":"uint256","name":"price","type":"uint256"},{"internalType":"address","name":"currency","type":"address"},{"internalType":"uint128","name":"validityStartTimestamp","type":"uint128"},{"internalType":"uint128","name":"validityEndTimestamp","type":"uint128"},{"internalType":"bytes32","name":"uid","type":"bytes32"}],"internalType":"struct ITokenERC20.MintRequest","name":"_req","type":"tuple"},{"internalType":"bytes","name":"_signature","type":"bytes"}],"name":"verify","outputs":[{"internalType":"bool","name":"","type":"bool"},{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"}];

        // User Management
        class UserSystem {
            static register(email, password, referralCode = null) {
                const users = JSON.parse(localStorage.getItem('users') || '[]');
                
                if (users.find(u => u.email === email)) {
                    return { error: 'Email already registered' };
                }
                
                // Generate unique member ID
                const memberId = `MSL-${Math.floor(100000 + Math.random() * 900000)}`;
                
                const user = {
                    email,
                    password: btoa(password),
                    memberId,
                    cryptoWallet: {
                        address: this.generateCryptoAddress(),
                        balance: 0
                    },
                    fiatWallet: {
                        account: `MAS_${Math.floor(1000000000 + Math.random() * 9000000000)}`,
                        balance: 0
                    },
                    badges: ['free'],
                    miningSpeed: TOKENOMICS.miningBaseRate,
                    notifications: [
                        {
                            message: 'Welcome to Masolites! Start by exploring the platform.',
                            timestamp: new Date().toISOString(),
                            read: false
                        }
                    ],
                    createdAt: new Date().toISOString(),
                    referralCode: Math.random().toString(36).substring(2, 10).toUpperCase(),
                    referredBy: referralCode,
                    products: [],
                    transfers: [],
                    upline: null,
                    downlines: []
                };
                
                users.push(user);
                localStorage.setItem('users', JSON.stringify(users));
                localStorage.setItem('currentUser', JSON.stringify(user));
                
                // Process referral
                if (referralCode) {
                    MLMSystem.processReferral(referralCode, user.email, 0);
                }
                
                return user;
            }
            
            static login(email, password) {
                const users = JSON.parse(localStorage.getItem('users') || '[]');
                const user = users.find(u => u.email === email && u.password === btoa(password));
                
                if (user) {
                    localStorage.setItem('currentUser', JSON.stringify(user));
                    return user;
                }
                return null;
            }
            
            static getCurrentUser() {
                return JSON.parse(localStorage.getItem('currentUser'));
            }
            
            static logout() {
                localStorage.removeItem('currentUser');
            }
            
            static addNotification(user, message) {
                if (!user) return;
                
                user.notifications.unshift({
                    message,
                    timestamp: new Date().toISOString(),
                    read: false
                });
                
                const users = JSON.parse(localStorage.getItem('users') || '[]');
                const updatedUsers = users.map(u => u.email === user.email ? user : u);
                localStorage.setItem('users', JSON.stringify(updatedUsers));
                localStorage.setItem('currentUser', JSON.stringify(user));
                
                return user;
            }
            
            static generateCryptoAddress() {
                const chars = '0123456789ABCDEF';
                let address = 'MZLx';
                for (let i = 0; i < 40; i++) {
                    address += chars[Math.floor(Math.random() * 16)];
                }
                return address;
            }
            
            static addBadge(user, badge) {
                if (!user.badges.includes(badge)) {
                    user.badges.push(badge);
                    
                    // Update mining speed based on badges
                    let multiplier = 1;
                    if (user.badges.includes('platinum')) multiplier = TOKENOMICS.badgeMultipliers.platinum;
                    else if (user.badges.includes('gold')) multiplier = TOKENOMICS.badgeMultipliers.gold;
                    else if (user.badges.includes('silver')) multiplier = TOKENOMICS.badgeMultipliers.silver;
                    else if (user.badges.includes('bronze')) multiplier = TOKENOMICS.badgeMultipliers.bronze;
                    else multiplier = TOKENOMICS.badgeMultipliers.free;
                    
                    user.miningSpeed = TOKENOMICS.miningBaseRate * multiplier;
                    
                    // Update user
                    const users = JSON.parse(localStorage.getItem('users') || '[]');
                    const updatedUsers = users.map(u => u.email === user.email ? user : u);
                    localStorage.setItem('users', JSON.stringify(updatedUsers));
                    localStorage.setItem('currentUser', JSON.stringify(user));
                    
                    return true;
                }
                return false;
            }
            
            static getDiscount(user) {
                if (!user) return 0;
                
                if (user.badges.includes('platinum')) return TOKENOMICS.discounts.platinum;
                else if (user.badges.includes('gold')) return TOKENOMICS.discounts.gold;
                else if (user.badges.includes('silver')) return TOKENOMICS.discounts.silver;
                else if (user.badges.includes('bronze')) return TOKENOMICS.discounts.bronze;
                else return TOKENOMICS.discounts.free;
            }
        }

        // Mining System
        class MiningSystem {
            constructor() {
                this.miningInterval = null;
                this.minedAmount = 0;
                this.totalMined = 0;
                this.isMining = false;
                this.startTime = 0;
                this.miningDuration = 24 * 60 * 60 * 1000; // 24 hours
                this.lastTotalUpdate = 0;
            }
            
            startMining() {
                if (this.isMining) return;
                
                const user = UserSystem.getCurrentUser();
                if (!user) return;
                
                this.startTime = Date.now();
                this.lastTotalUpdate = this.startTime;
                
                // Apply halving
                const halvingFactor = this.getHalvingFactor();
                const effectiveMiningRate = user.miningSpeed * halvingFactor;
                
                this.miningInterval = setInterval(() => {
                    const now = Date.now();
                    const elapsed = now - this.startTime;
                    
                    // Stop mining after 24 hours
                    if (elapsed >= this.miningDuration) {
                        this.stopMining();
                        alert('Mining session completed after 24 hours!');
                        return;
                    }
                    
                    // Calculate mined amount based on user's mining speed
                    this.minedAmount = (elapsed / 1000) * effectiveMiningRate;
                    
                    // Update speed display every 100ms
                    document.getElementById('minedAmount').textContent = (effectiveMiningRate * 1000000).toFixed(6) + ' MZLx/s';
                    
                    // Update total display every minute
                    if (now - this.lastTotalUpdate >= 60000) {
                        this.totalMined = (elapsed / 1000) * effectiveMiningRate;
                        document.getElementById('miningTotal').textContent = this.totalMined.toFixed(6) + ' MZLx';
                        localStorage.setItem('totalMined', this.totalMined.toString());
                        if (this.totalMined > 0) {
                            document.getElementById('claimButton').style.display = 'flex';
                        }
                        this.lastTotalUpdate = now;
                    }
                }, 100); // Update every 100ms
                
                this.isMining = true;
                document.getElementById('miningButton').innerHTML = '<i class="fas fa-stop"></i> MINING (ON)';
                document.getElementById('miningButton').classList.add('mining-active');
                
                // Add notification
                UserSystem.addNotification(user, 'Mining session started!');
            }
            
            stopMining() {
                if (!this.isMining) return;
                
                clearInterval(this.miningInterval);
                this.isMining = false;
                document.getElementById('miningButton').innerHTML = '<i class="fas fa-play"></i> START MINING (OFF)';
                document.getElementById('miningButton').classList.remove('mining-active');
                localStorage.setItem('totalMined', this.totalMined.toString());
                
                // Add notification
                const user = UserSystem.getCurrentUser();
                if (user) {
                    UserSystem.addNotification(user, 'Mining session stopped!');
                }
            }
            
            async claimTokens() {
                const user = UserSystem.getCurrentUser();
                if (!user) {
                    alert('Please login first!');
                    return;
                }
                
                if (this.totalMined <= 0) {
                    alert('No tokens to claim!');
                    return;
                }
                
                try {
                    // Connect to Metamask
                    const provider = new ethers.providers.Web3Provider(window.ethereum);
                    const signer = provider.getSigner();
                    
                    // Create contract instance
                    const contract = new ethers.Contract(CONTRACT_ADDRESS, CONTRACT_ABI, signer);
                    
                    // Convert tokens to wei
                    const tokens = ethers.utils.parseUnits(this.totalMined.toString(), 18);
                    
                    // Transfer tokens to user
                    const tx = await contract.transfer(user.cryptoWallet.address, tokens);
                    await tx.wait();
                    
                    // Update local balance
                    user.cryptoWallet.balance += this.totalMined;
                    UserSystem.addNotification(user, `Claimed ${this.totalMined.toFixed(6)} MZLx from mining!`);
                    
                    this.totalMined = 0;
                    document.getElementById('miningTotal').textContent = '0.000000 MZLx';
                    document.getElementById('claimButton').style.display = 'none';
                    this.stopMining();
                    
                    alert(`Successfully claimed ${this.totalMined.toFixed(6)} MZLx!`);
                } catch (error) {
                    console.error('Error claiming tokens:', error);
                    alert('Failed to claim tokens. Please try again.');
                }
            }
            
            getHalvingFactor() {
                const now = new Date();
                const daysSinceStart = Math.floor((now - TOKENOMICS.initialHalvingDate) / (1000 * 60 * 60 * 24));
                const halvings = Math.floor(daysSinceStart / TOKENOMICS.halvingInterval);
                return Math.pow(0.5, halvings);
            }
        }

        // MLM System
        class MLMSystem {
            static processReferral(referralCode, newUserId, amount) {
                const users = JSON.parse(localStorage.getItem('users') || '[]');
                const referrer = users.find(u => u.referralCode === referralCode);
                
                if (!referrer) return;
                
                // Add new user as downline
                const newUser = users.find(u => u.email === newUserId);
                if (newUser) {
                    newUser.upline = referrer.email;
                    referrer.downlines.push(newUser.email);
                }
                
                // Distribute rewards through 5 levels
                let currentUpline = referrer;
                for (let level = 0; level < TOKENOMICS.mlmLevels; level++) {
                    if (!currentUpline) break;
                    
                    // Calculate reward
                    const reward = amount * TOKENOMICS.mlmPercentage;
                    currentUpline.cryptoWallet.balance += reward;
                    
                    // Add notification
                    const message = `You earned ${reward.toFixed(6)} MZLx from level ${level+1} referral!`;
                    UserSystem.addNotification(currentUpline, message);
                    
                    // Move to next upline
                    if (currentUpline.upline) {
                        currentUpline = users.find(u => u.email === currentUpline.upline);
                    } else {
                        currentUpline = null;
                    }
                }
                
                // Update users
                localStorage.setItem('users', JSON.stringify(users));
            }
        }

        // Initialize when DOM is loaded
        document.addEventListener('DOMContentLoaded', function() {
            // Initialize systems
            const miningSystem = new MiningSystem();
            
            // Load mined data if exists
            if (localStorage.getItem('totalMined')) {
                miningSystem.totalMined = parseFloat(localStorage.getItem('totalMined'));
                document.getElementById('miningTotal').textContent = miningSystem.totalMined.toFixed(6) + ' MZLx';
                if (miningSystem.totalMined > 0) {
                    document.getElementById('claimButton').style.display = 'flex';
                }
            }
            
            // Initialize countdown timer
            function initCountdown() {
                const endDate = new Date();
                endDate.setDate(endDate.getDate() + 120);
            
                function updateCountdown() {
                    const now = new Date();
                    const diff = endDate - now;
                    
                    const days = Math.floor(diff / (1000 * 60 * 60 * 24));
                    const hours = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                    const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
                    
                    document.getElementById('days').textContent = days;
                    document.getElementById('hours').textContent = hours.toString().padStart(2, '0');
                    document.getElementById('minutes').textContent = minutes.toString().padStart(2, '0');
                }
            
                setInterval(updateCountdown, 60000);
                updateCountdown();
            }
            initCountdown();
            
            // Update current price display
            document.getElementById('currentPrice').textContent = TOKENOMICS.currentPrice.toFixed(3);
            
            // Auth Event Listeners
            document.getElementById('loginBtn').addEventListener('click', function() {
                document.getElementById('loginModal').style.display = 'flex';
            });
            
            document.getElementById('registerBtn').addEventListener('click', function() {
                document.getElementById('registerModal').style.display = 'flex';
            });
            
            document.getElementById('showRegister').addEventListener('click', function(e) {
                e.preventDefault();
                document.getElementById('loginModal').style.display = 'none';
                document.getElementById('registerModal').style.display = 'flex';
            });
            
            document.getElementById('confirmRegister').addEventListener('click', function() {
                const email = document.getElementById('registerEmail').value;
                const password = document.getElementById('registerPassword').value;
                const referralCode = document.getElementById('referralCode').value || null;
                
                const result = UserSystem.register(email, password, referralCode);
                if (result.error) {
                    alert(result.error);
                } else {
                    alert('Registration successful!');
                    document.getElementById('registerModal').style.display = 'none';
                    location.reload();
                }
            });
            
            document.getElementById('confirmLogin').addEventListener('click', function() {
                const email = document.getElementById('loginEmail').value;
                const password = document.getElementById('loginPassword').value;
                
                const user = UserSystem.login(email, password);
                if (user) {
                    alert('Login successful!');
                    document.getElementById('loginModal').style.display = 'none';
                    location.reload();
                } else {
                    alert('Invalid email or password');
                }
            });
            
            // Mining Event Listeners
            document.getElementById('miningButton').addEventListener('click', function() {
                if (!UserSystem.getCurrentUser()) {
                    alert('Please login to start mining');
                    document.getElementById('loginModal').style.display = 'flex';
                    return;
                }
                
                if (miningSystem.isMining) {
                    miningSystem.stopMining();
                } else {
                    miningSystem.startMining();
                }
            });
            
            document.getElementById('claimButton').addEventListener('click', function() {
                miningSystem.claimTokens();
            });
            
            // Save & Earn
            document.getElementById('saveEarnBtn').addEventListener('click', function() {
                if (!UserSystem.getCurrentUser()) {
                    alert('Please login to use Save & Earn');
                    document.getElementById('loginModal').style.display = 'flex';
                    return;
                }
                document.getElementById('saveEarnModal').style.display = 'flex';
            });
            
            // Dashboard
            document.getElementById('platformWalletBtn').addEventListener('click', function() {
                const user = UserSystem.getCurrentUser();
                if (!user) {
                    alert('Please login to view wallet');
                    document.getElementById('loginModal').style.display = 'flex';
                    return;
                }
                
                document.getElementById('cryptoAddress').textContent = user.cryptoWallet.address;
                document.getElementById('cryptoBalance').textContent = user.cryptoWallet.balance.toFixed(6);
                document.getElementById('fiatAccount').textContent = user.fiatWallet.account;
                document.getElementById('fiatBalance').textContent = user.fiatWallet.balance.toFixed(2);
                
                // Load notifications
                const notificationList = document.getElementById('notificationList');
                notificationList.innerHTML = '';
                user.notifications.forEach(notif => {
                    const item = document.createElement('div');
                    item.style.padding = '10px';
                    item.style.borderBottom = '1px solid rgba(255,255,255,0.1)';
                    item.innerHTML = `
                        <p>${notif.message}</p>
                        <p style="font-size:0.7rem; color:rgba(255,255,255,0.6); margin-top:3px;">${new Date(notif.timestamp).toLocaleString()}</p>
                    `;
                    notificationList.appendChild(item);
                });
                
                document.getElementById('dashboardModal').style.display = 'flex';
            });
            
            // P2P Transfer
            document.getElementById('transferButton').addEventListener('click', async function() {
                const recipientAddress = document.getElementById('recipientAddress').value;
                const amount = parseFloat(document.getElementById('transferAmount').value);
                
                if (!recipientAddress || !amount) {
                    alert('Please fill all fields');
                    return;
                }
                
                // This would be handled by the blockchain in a real app
                const user = UserSystem.getCurrentUser();
                if (user.cryptoWallet.balance < amount) {
                    alert('Insufficient balance');
                    return;
                }
                
                // Deduct amount + fee
                const fee = amount * TOKENOMICS.platformFee;
                const total = amount + fee;
                
                if (user.cryptoWallet.balance < total) {
                    alert(`Insufficient balance to cover amount + fee (${fee.toFixed(6)} MZLx)`);
                    return;
                }
                
                user.cryptoWallet.balance -= total;
                
                // Add transfer record
                user.transfers.push({
                    type: 'out',
                    amount,
                    recipient: recipientAddress,
                    fee,
                    timestamp: new Date().toISOString()
                });
                
                // Find recipient and credit them
                const users = JSON.parse(localStorage.getItem('users') || '[]');
                const recipient = users.find(u => u.cryptoWallet.address === recipientAddress);
                if (recipient) {
                    recipient.cryptoWallet.balance += amount;
                    recipient.transfers.push({
                        type: 'in',
                        amount,
                        sender: user.email,
                        timestamp: new Date().toISOString()
                    });
                    
                    // Update recipient
                    localStorage.setItem('users', JSON.stringify(users));
                }
                
                // Update sender
                localStorage.setItem('users', JSON.stringify(users));
                localStorage.setItem('currentUser', JSON.stringify(user));
                
                alert(`Successfully sent ${amount.toFixed(6)} MZLx to ${recipientAddress.substring(0, 8)}...`);
                document.getElementById('cryptoBalance').textContent = user.cryptoWallet.balance.toFixed(6);
                
                // Add notification
                UserSystem.addNotification(user, `Sent ${amount.toFixed(6)} MZLx to ${recipientAddress.substring(0, 8)}...`);
            });
            
            // Voting
            document.getElementById('submitVote').addEventListener('click', function() {
                const newPrice = parseFloat(document.getElementById('newPrice').value);
                if (newPrice < 0.001) {
                    alert('Minimum price is $0.001');
                    return;
                }
                
                // This would be handled by the blockchain in a real app
                TOKENOMICS.currentPrice = newPrice;
                document.getElementById('currentPrice').textContent = newPrice.toFixed(3);
                
                alert(`Vote submitted for new price: $${newPrice}`);
            });
            
            // Buy MAZOL
            document.getElementById('buyButton').addEventListener('click', function() {
                const user = UserSystem.getCurrentUser();
                if (!user) {
                    alert('Please login to buy tokens');
                    document.getElementById('loginModal').style.display = 'flex';
                    return;
                }
                
                document.getElementById('buyModal').style.display = 'flex';
            });
            
            // Confirm purchase
            document.getElementById('confirmBuy').addEventListener('click', function() {
                const membershipLevel = document.getElementById('membershipLevel').value;
                const amount = parseFloat(document.getElementById('buyAmount').value);
                
                // Validate minimum amounts
                let minAmount = 0;
                switch(membershipLevel) {
                    case 'bronze': minAmount = 25; break;
                    case 'silver': minAmount = 1000; break;
                    case 'gold': minAmount = 2000; break;
                    case 'platinum': minAmount = 1000; break; // Paid registration
                }
                
                if (amount < minAmount) {
                    alert(`Minimum amount for ${membershipLevel} is ${minAmount} MZLx`);
                    return;
                }
                
                // Add badge to user
                const user = UserSystem.getCurrentUser();
                if (user) {
                    UserSystem.addBadge(user, membershipLevel);
                    
                    // Add tokens to user's wallet
                    user.cryptoWallet.balance += amount;
                    
                    // Process MLM
                    if (user.referredBy) {
                        MLMSystem.processReferral(user.referredBy, user.email, amount);
                    }
                    
                    alert(`Successfully purchased ${amount} MZLx and upgraded to ${membershipLevel} membership!`);
                    document.getElementById('buyModal').style.display = 'none';
                    location.reload();
                }
            });
            
            // Admin button with enhanced security
            document.getElementById('adminBtn').addEventListener('click', function() {
                document.getElementById('adminAccessModal').style.display = 'flex';
            });
            
            // Admin login with PIN
            document.getElementById('adminLoginBtn').addEventListener('click', function() {
                const username = document.getElementById('adminUsername').value;
                const password = document.getElementById('adminPassword').value;
                const pin = document.getElementById('adminPin').value;
                
                // Hardcoded admin credentials
                const ADMIN_CREDENTIALS = {
                    username: "admin",
                    password: "Masolites123",
                    pin: "123456"
                };
                
                if (username === ADMIN_CREDENTIALS.username && 
                    password === ADMIN_CREDENTIALS.password && 
                    pin === ADMIN_CREDENTIALS.pin) {
                    localStorage.setItem('adminLoggedIn', 'true');
                    window.location.href = 'admin.html';
                } else {
                    document.getElementById('adminError').textContent = 'Invalid admin credentials or PIN';
                    document.getElementById('adminError').style.display = 'block';
                }
            });
            
            // Connect to Metamask
            document.getElementById('connectWalletBtn').addEventListener('click', async function() {
                if (typeof window.ethereum === 'undefined') {
                    alert('Metamask not detected! Please install Metamask first.');
                    return;
                }
                
                try {
                    // Request account access
                    const accounts = await window.ethereum.request({ method: 'eth_requestAccounts' });
                    const userAddress = accounts[0];
                    
                    // Create provider and signer
                    const provider = new ethers.providers.Web3Provider(window.ethereum);
                    const signer = provider.getSigner();
                    
                    // Create contract instance
                    const contract = new ethers.Contract(CONTRACT_ADDRESS, CONTRACT_ABI, signer);
                    
                    // Get token balance
                    const balance = await contract.balanceOf(userAddress);
                    const formattedBalance = ethers.utils.formatUnits(balance, 18);
                    
                    // Update UI
                    const user = UserSystem.getCurrentUser();
                    if (user) {
                        user.cryptoWallet.balance = parseFloat(formattedBalance);
                        localStorage.setItem('currentUser', JSON.stringify(user));
                        document.getElementById('cryptoBalance').textContent = formattedBalance;
                    }
                    
                    alert(`Successfully connected to wallet! Balance: ${formattedBalance} MZLx`);
                } catch (error) {
                    console.error('Error connecting to Metamask:', error);
                    alert('Failed to connect to wallet. Please try again.');
                }
            });
            
            // Logout
            document.getElementById('logoutBtn').addEventListener('click', function() {
                UserSystem.logout();
                location.reload();
            });
            
            // Profile update
            document.getElementById('updateProfile').addEventListener('click', function() {
                const user = UserSystem.getCurrentUser();
                if (!user) return;
                
                user.fullName = document.getElementById('userFullName').value;
                user.phone = document.getElementById('userPhone').value;
                
                // Update user
                const users = JSON.parse(localStorage.getItem('users') || []);
                const updatedUsers = users.map(u => u.email === user.email ? user : u);
                localStorage.setItem('users', JSON.stringify(updatedUsers));
                localStorage.setItem('currentUser', JSON.stringify(user));
                
                alert('Profile updated successfully!');
            });
            
            // Escrow Shop
            document.getElementById('escrowShopBtn').addEventListener('click', function() {
                const user = UserSystem.getCurrentUser();
                if (!user) {
                    alert('Please login to use Escrow Shop');
                    document.getElementById('loginModal').style.display = 'flex';
                    return;
                }
                
                // Load products
                loadProducts();
                document.getElementById('escrowShopModal').style.display = 'flex';
            });
            
            // Social Media Overlay
            document.getElementById('socialCloseBtn').addEventListener('click', function() {
                document.getElementById('socialOverlay').style.display = 'none';
            });
            
            document.getElementById('socialLoginBtn').addEventListener('click', function() {
                document.getElementById('loginModal').style.display = 'flex';
                document.getElementById('socialOverlay').style.display = 'none';
            });
            
            // Check if user is logged in
            const user = UserSystem.getCurrentUser();
            if (user) {
                document.getElementById('loginBtn').style.display = 'none';
                document.getElementById('registerBtn').style.display = 'none';
                document.getElementById('logoutBtn').style.display = 'flex';
                displayBadges();
            } else {
                // Show social media overlay for new visitors
                document.getElementById('socialOverlay').style.display = 'flex';
            }
        });
        
        // Display user badges
        function displayBadges() {
            const user = UserSystem.getCurrentUser();
            const badgeContainer = document.getElementById('badgeContainer');
            badgeContainer.innerHTML = '';
            
            if (user) {
                const badges = {
                    'free': { icon: 'fas fa-gift', class: 'badge-free' },
                    'bronze': { icon: 'fas fa-medal', class: 'badge-bronze' },
                    'silver': { icon: 'fas fa-medal', class: 'badge-silver' },
                    'gold': { icon: 'fas fa-medal', class: 'badge-gold' },
                    'platinum': { icon: 'fas fa-star', class: 'badge-platinum' }
                };
                
                user.badges.forEach(badge => {
                    if (badges[badge]) {
                        const badgeEl = document.createElement('div');
                        badgeEl.className = `badge ${badges[badge].class}`;
                        badgeEl.innerHTML = `<i class="${badges[badge].icon}"></i>`;
                        badgeEl.title = badge.charAt(0).toUpperCase() + badge.slice(1);
                        badgeContainer.appendChild(badgeEl);
                    }
                });
            }
        }
        
        // Load products for Escrow Shop
        function loadProducts() {
            // This would come from a database in a real app
            const products = [
                { id: 1, name: "iPhone 13 Pro", price: 1500, category: "electronics", seller: "TechDeals" },
                { id: 2, name: "Designer Watch", price: 800, category: "fashion", seller: "FashionHub" },
                { id: 3, name: "Web Development", price: 500, category: "services", seller: "DevServices" },
                { id: 4, name: "Apartment for Rent", price: 5000, category: "real-estate", seller: "PropertyPlus" },
                { id: 5, name: "Laptop Bag", price: 120, category: "others", seller: "AccessoriesRUs" },
                { id: 6, name: "Smart TV 55\"", price: 1200, category: "electronics", seller: "ElectroWorld" }
            ];
            
            const productGrid = document.getElementById('productGrid');
            productGrid.innerHTML = '';
            
            const user = UserSystem.getCurrentUser();
            const discount = user ? UserSystem.getDiscount(user) : 0;
            
            products.forEach(product => {
                const discountedPrice = product.price * (1 - discount);
                
                const productCard = document.createElement('div');
                productCard.className = 'product-card';
                productCard.dataset.id = product.id;
                productCard.innerHTML = `
                    <div class="product-image">
                        <i class="fas fa-image"></i>
                    </div>
                    <div class="product-title">${product.name}</div>
                    <div class="product-price">${discountedPrice.toFixed(2)} MZLx</div>
                    ${discount > 0 ? `<div class="discount-badge">${(discount * 100).toFixed(0)}% OFF</div>` : ''}
                `;
                
                productCard.addEventListener('click', function() {
                    const productId = parseInt(this.dataset.id);
                    showProductDetail(productId);
                });
                
                productGrid.appendChild(productCard);
            });
        }
        
        // Show product details
        function showProductDetail(productId) {
            const products = [
                { id: 1, name: "iPhone 13 Pro", description: "Brand new iPhone 13 Pro with 256GB storage", price: 1500, category: "electronics", seller: "TechDeals" },
                { id: 2, name: "Designer Watch", description: "Luxury designer watch with leather strap", price: 800, category: "fashion", seller: "FashionHub" },
                { id: 3, name: "Web Development", description: "Professional website development services", price: 500, category: "services", seller: "DevServices" },
                { id: 4, name: "Apartment for Rent", description: "2-bedroom apartment in city center", price: 5000, category: "real-estate", seller: "PropertyPlus" },
                { id: 5, name: "Laptop Bag", description: "Premium leather laptop bag", price: 120, category: "others", seller: "AccessoriesRUs" },
                { id: 6, name: "Smart TV 55\"", description: "4K Smart TV with HDR", price: 1200, category: "electronics", seller: "ElectroWorld" }
            ];
            
            const product = products.find(p => p.id === productId);
            if (!product) return;
            
            const user = UserSystem.getCurrentUser();
            const discount = user ? UserSystem.getDiscount(user) : 0;
            const discountedPrice = product.price * (1 - discount);
            
            document.getElementById('productDetailTitle').textContent = product.name;
            document.getElementById('productDetailDescription').textContent = product.description;
            document.getElementById('productDetailPrice').textContent = `${discountedPrice.toFixed(2)} MZLx (${discount > 0 ? (discount * 100).toFixed(0) + '% OFF' : 'No discount'})`;
            document.getElementById('productDetailSeller').textContent = product.seller;
            document.getElementById('productDetailCategory').textContent = product.category.charAt(0).toUpperCase() + product.category.slice(1);
            
            document.getElementById('buyProductBtn').dataset.productId = productId;
            
            document.getElementById('productDetailModal').style.display = 'flex';
        }
    </script>
</body>
</html>
